import{r as i,c as C,j as e}from"./index-BNHuU7e9.js";const M={pdf:"bg-red-100 text-red-700 border-red-200",doc:"bg-blue-100 text-blue-700 border-blue-200",xls:"bg-green-100 text-green-700 border-green-200",img:"bg-purple-100 text-purple-700 border-purple-200",txt:"bg-gray-100 text-gray-700 border-gray-200",file:"bg-gray-100 text-gray-700 border-gray-200"},E={pdf:"PDF",doc:"DOC",xls:"XLS",img:"IMG",txt:"TXT",file:"FILE"};function g(s,r){const t=s.toLowerCase(),n=(r||"").toLowerCase();return t.includes("pdf")||n.endsWith(".pdf")?"pdf":t.includes("excel")||t.includes("spreadsheet")||n.endsWith(".xls")||n.endsWith(".xlsx")?"xls":t.includes("word")||t.includes("wordprocessingml")||n.endsWith(".doc")||n.endsWith(".docx")?"doc":t.includes("image")||/\.(jpg|jpeg|png|gif|webp|svg|bmp)$/i.test(n)?"img":t.includes("text")||n.endsWith(".txt")?"txt":"file"}function k(s,r){const t=g(s,r);return t==="pdf"||t==="img"}const v=({type:s,fileName:r,size:t="md",className:n=""})=>{const l=g(s,r),o=M[l],d=E[l],x={sm:"w-8 h-8 text-xs",md:"w-10 h-10 text-xs",lg:"w-12 h-12 text-sm"};return e.jsx("div",{className:`
        ${x[t]}
        ${o}
        rounded border flex items-center justify-center font-bold
        ${n}
      `,role:"img","aria-label":`${d} file`,children:d})},B=({url:s,fileName:r,mimeType:t,fileSize:n,isOpen:l,onClose:o,onDownload:d})=>{const[x,h]=i.useState(!0),[p,j]=i.useState(null),[m,c]=i.useState(100),u=g(t,r),N=k(t,r);i.useEffect(()=>{h(!0),j(null),c(100)},[s]);const y=i.useCallback(()=>{h(!1)},[]),w=i.useCallback(()=>{h(!1),j("Failed to load document preview")},[]),b=i.useCallback(a=>{a.key==="Escape"?o():a.key==="+"||a.key==="="?c(f=>Math.min(f+25,200)):a.key==="-"?c(f=>Math.max(f-25,50)):a.key==="0"&&c(100)},[o]);i.useEffect(()=>(l&&(document.addEventListener("keydown",b),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",b),document.body.style.overflow=""}),[l,b]);const L=a=>a?a<1024?`${a} B`:a<1024*1024?`${(a/1024).toFixed(1)} KB`:`${(a/(1024*1024)).toFixed(1)} MB`:"";return!l||typeof window>"u"?null:C.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-[9999]",onClick:o,role:"dialog","aria-modal":"true","aria-labelledby":"preview-title",children:e.jsxs("div",{className:"bg-[var(--surface)] rounded-lg shadow-2xl w-full max-w-5xl max-h-[90vh] mx-4 flex flex-col overflow-hidden",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx(v,{type:t,fileName:r,size:"md"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h2",{id:"preview-title",className:"font-medium text-[var(--text)] truncate",children:r}),n&&e.jsx("p",{className:"text-sm text-[var(--muted)]",children:L(n)})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[u==="img"&&e.jsxs("div",{className:"flex items-center gap-1 mr-2",children:[e.jsx("button",{onClick:()=>c(a=>Math.max(a-25,50)),className:"p-1.5 rounded hover:bg-gray-200 text-gray-600","aria-label":"Zoom out",disabled:m<=50,children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),e.jsxs("span",{className:"text-sm text-gray-600 w-12 text-center",children:[m,"%"]}),e.jsx("button",{onClick:()=>c(a=>Math.min(a+25,200)),className:"p-1.5 rounded hover:bg-gray-200 text-gray-600","aria-label":"Zoom in",disabled:m>=200,children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),e.jsx("button",{onClick:()=>c(100),className:"p-1.5 rounded hover:bg-gray-200 text-gray-600 text-xs","aria-label":"Reset zoom",children:"Reset"})]}),d?e.jsxs("button",{onClick:d,className:"flex items-center gap-1.5 px-3 py-1.5 bg-brand-navy text-brand-cream rounded-lg hover:bg-brand-navy/90 text-sm",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download"]}):e.jsxs("a",{href:s,download:r,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 px-3 py-1.5 bg-brand-navy text-brand-cream rounded-lg hover:bg-brand-navy/90 text-sm",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download"]}),e.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 rounded hover:bg-gray-200 text-gray-600","aria-label":"Open in new tab",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})}),e.jsx("button",{onClick:o,className:"p-1.5 rounded hover:bg-gray-200 text-gray-600","aria-label":"Close preview",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),e.jsxs("div",{className:"flex-1 overflow-auto bg-gray-100 relative min-h-[400px]",children:[x&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 border-4 border-brand-navy/20 border-t-brand-navy rounded-full animate-spin"}),e.jsx("p",{className:"text-sm text-[var(--muted)]",children:"Loading preview..."})]})}),p&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center p-6",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("p",{className:"text-[var(--text)] font-medium mb-1",children:p}),e.jsx("p",{className:"text-sm text-[var(--muted)]",children:"Try downloading the file instead"})]})}),N?u==="pdf"?e.jsx("iframe",{src:`${s}#toolbar=1&navpanes=0`,className:"w-full h-full min-h-[500px]",title:`Preview of ${r}`,onLoad:y,onError:w}):u==="img"?e.jsx("div",{className:"flex items-center justify-center p-4 min-h-[400px]",children:e.jsx("img",{src:s,alt:r,className:"max-w-full max-h-full object-contain transition-transform duration-200",style:{transform:`scale(${m/100})`},onLoad:y,onError:w})}):null:e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center p-6",children:[e.jsx(v,{type:t,fileName:r,size:"lg",className:"mx-auto mb-4"}),e.jsx("p",{className:"text-[var(--text)] font-medium mb-1",children:"Preview not available"}),e.jsx("p",{className:"text-sm text-[var(--muted)] mb-4",children:"This file type cannot be previewed in the browser"}),e.jsxs("a",{href:s,download:r,className:"inline-flex items-center gap-2 px-4 py-2 bg-brand-navy text-brand-cream rounded-lg hover:bg-brand-navy/90",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download File"]})]})})]}),e.jsxs("div",{className:"px-4 py-2 border-t border-gray-200 bg-gray-50 text-xs text-[var(--muted)] flex items-center justify-between",children:[e.jsx("span",{children:"Press ESC to close"}),u==="img"&&e.jsx("span",{children:"+/- to zoom, 0 to reset"})]})]})}),document.body)},W=({name:s,type:r,uploadedAt:t,fileUrl:n,showIcon:l=!1,onPreview:o})=>{const d=typeof t=="string"?new Date(t).toLocaleDateString():t.toLocaleDateString(),x=o&&n&&r&&k(r,s);return e.jsxs("div",{className:"flex items-center justify-between p-3 border border-brand-navy/20 rounded-lg bg-[var(--surface)]",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[l&&r&&e.jsx(v,{type:r,fileName:s,size:"md"}),e.jsxs("div",{className:"text-sm text-[var(--muted)]",children:[e.jsx("div",{className:"font-medium text-[var(--text)]",children:s}),e.jsx("div",{children:d})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[x&&e.jsx("button",{onClick:o,className:"px-3 py-1 text-xs bg-brand-gold text-brand-charcoal rounded hover:bg-brand-gold-2 focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-gold",children:"Preview"}),n?e.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1 text-xs bg-brand-cream text-brand-navy rounded hover:bg-brand-gold-2 focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-gold",children:"Open"}):e.jsx("span",{className:"px-3 py-1 text-xs bg-brand-cream text-brand-navy rounded opacity-60","aria-disabled":"true",children:"Open"})]})]})},F=({documents:s,showIcons:r=!1,onPreview:t,emptyMessage:n="No documents"})=>s.length===0?e.jsx("div",{className:"text-sm text-[var(--muted)]",children:n}):e.jsx(e.Fragment,{children:s.map(l=>e.jsx(W,{id:l.id,name:l.name,type:l.type,uploadedAt:l.uploadedAt,fileUrl:l.fileUrl,showIcon:r,onPreview:t?()=>t(l):void 0},l.id))});export{B as D,v as F,F as a,k as c};
