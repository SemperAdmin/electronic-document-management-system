import{r as d,R as de,j as e}from"./index-Dztzn6rj.js";import{U as Q}from"./units-CaNgy_2U.js";import{z as me,h as xe,B as U,v as B}from"./db-txr9OHg1.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=c=>c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ue=c=>c.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,a,i)=>i?i.toUpperCase():a.toLowerCase()),V=c=>{const r=ue(c);return r.charAt(0).toUpperCase()+r.slice(1)},ee=(...c)=>c.filter((r,a,i)=>!!r&&r.trim()!==""&&i.indexOf(r)===a).join(" ").trim(),he=c=>{for(const r in c)if(r.startsWith("aria-")||r==="role"||r==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var pe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=d.forwardRef(({color:c="currentColor",size:r=24,strokeWidth:a=2,absoluteStrokeWidth:i,className:h="",children:g,iconNode:b,...p},f)=>d.createElement("svg",{ref:f,...pe,width:r,height:r,stroke:c,strokeWidth:i?Number(a)*24/Number(r):a,className:ee("lucide",h),...!g&&!he(p)&&{"aria-hidden":"true"},...p},[...b.map(([x,l])=>d.createElement(x,l)),...Array.isArray(g)?g:[g]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=(c,r)=>{const a=d.forwardRef(({className:i,...h},g)=>d.createElement(be,{ref:g,iconNode:r,className:ee(`lucide-${ge(V(c))}`,`lucide-${c}`,i),...h}));return a.displayName=V(c),a};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],je=_("chevron-left",ye);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],fe=_("chevron-right",Ne);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]],we=_("chevrons-left",Se);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]],ve=_("chevrons-right",Ce),X=({currentPage:c,totalPages:r,totalItems:a,pageSize:i,startIndex:h,endIndex:g,onPageChange:b,onPageSizeChange:p,onNext:f,onPrevious:x,onFirst:l,onLast:y,canGoNext:N,canGoPrevious:u,pageSizeOptions:E=[10,25,50,100],showPageSizeSelector:w=!0})=>{const[A,I]=de.useState(""),L=()=>{const m=parseInt(A,10);!isNaN(m)&&m>=1&&m<=r&&(b(m),I(""))},z=m=>{m.key==="Enter"&&L()};return e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 py-4 px-2 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",e.jsx("span",{className:"font-semibold",children:h})," to"," ",e.jsx("span",{className:"font-semibold",children:g})," of"," ",e.jsx("span",{className:"font-semibold",children:a})," items"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:l,disabled:!u,className:"p-2 rounded-lg border border-gray-300 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"First page","aria-label":"Go to first page",children:e.jsx(we,{className:"w-4 h-4"})}),e.jsx("button",{onClick:x,disabled:!u,className:"p-2 rounded-lg border border-gray-300 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Previous page","aria-label":"Go to previous page",children:e.jsx(je,{className:"w-4 h-4"})}),e.jsx("div",{className:"flex items-center gap-2 px-3",children:e.jsxs("span",{className:"text-sm text-gray-600",children:["Page"," ",e.jsxs("span",{className:"font-semibold",children:[c," / ",r]})]})}),e.jsx("button",{onClick:f,disabled:!N,className:"p-2 rounded-lg border border-gray-300 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Next page","aria-label":"Go to next page",children:e.jsx(fe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:y,disabled:!N,className:"p-2 rounded-lg border border-gray-300 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Last page","aria-label":"Go to last page",children:e.jsx(ve,{className:"w-4 h-4"})})]}),w&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{htmlFor:"pageSize",className:"text-sm text-gray-600",children:"Show:"}),e.jsxs("select",{id:"pageSize",value:i,onChange:m=>{const S=m.target.value;p(S==="all"?a:parseInt(S,10))},className:"px-3 py-1 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[E.map(m=>e.jsx("option",{value:m,children:m},m)),e.jsx("option",{value:"all",children:"All"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{htmlFor:"jumpToPage",className:"text-sm text-gray-600",children:"Go to:"}),e.jsx("input",{id:"jumpToPage",type:"number",min:1,max:r,value:A,onChange:m=>I(m.target.value),onKeyDown:z,placeholder:String(c),className:"w-16 px-2 py-1 border border-gray-300 rounded-lg text-sm text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{onClick:L,disabled:!A,className:"px-3 py-1 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Go"})]})]})};function ke(){const[c,r]=d.useState([]),[a,i]=d.useState(null),[h,g]=d.useState(""),[b,p]=d.useState(""),[f,x]=d.useState(null),[l,y]=d.useState(null),N=d.useRef(null),[u,E]=d.useState("unit"),[w,A]=d.useState("assigned"),[I,L]=d.useState([]),[z,m]=d.useState(1),[S,se]=d.useState(10),[te,$]=d.useState(1),[k,ae]=d.useState(10);d.useEffect(()=>{try{const s=localStorage.getItem("currentUser");if(s){const n=JSON.parse(s);y(n),me().then(t=>{const o=t.find(j=>j.id===n.installationId);o&&i(o)}),xe().then(t=>L(t)).catch(()=>L([]))}}catch(s){console.error("Failed to load user from localStorage:",s)}},[]);const D=s=>{if(a){const n=a.unitUics.includes(s)?a.unitUics.filter(t=>t!==s):[...a.unitUics,s];i({...a,unitUics:n})}},ne=async()=>{if(a){const{ok:s,error:n}=await U(a);x(s?{type:"success",message:"Installation units updated successfully."}:{type:"error",message:`Failed to update installation: ${n}`})}},G=(()=>{const s=b.toLowerCase().trim();return s?Q.map(t=>{const o=t.unitName.toLowerCase(),j=t.ruc.toLowerCase(),oe=t.uic.toLowerCase(),ce=t.mcc.toLowerCase(),le=`${t.streetAddress} ${t.cityState} ${t.zip}`.toLowerCase();let P=1/0;return j.startsWith(s)?P=1:ce.startsWith(s)?P=2:o.startsWith(s)?P=3:oe.startsWith(s)?P=4:le.includes(s)&&(P=5),{unit:t,rank:P}}).filter(t=>t.rank!==1/0).sort((t,o)=>t.rank===o.rank?t.unit.unitName.localeCompare(o.unit.unitName):t.rank-o.rank).map(t=>t.unit):Q.slice().sort((t,o)=>t.unitName.localeCompare(o.unitName))})(),O=a?G.filter(s=>a.unitUics.includes(s.uic)):[],W=a?G.filter(s=>!a.unitUics.includes(s.uic)):[],M=O.length,T=Math.max(1,Math.ceil(M/(S||1))),C=Math.min(z,T),K=M===0?0:(C-1)*S+1,re=M===0?0:Math.min(K+S-1,M),q=O.slice((C-1)*S,(C-1)*S+S),F=W.length,R=Math.max(1,Math.ceil(F/(k||1))),v=Math.min(te,R),J=F===0?0:(v-1)*k+1,ie=F===0?0:Math.min(J+k-1,F),Z=W.slice((v-1)*k,(v-1)*k+k);return e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Installation Administration"}),!a&&e.jsx("div",{className:"text-center text-gray-500",children:e.jsx("p",{children:"You are not assigned to an installation."})}),a&&e.jsx(e.Fragment,{children:e.jsxs("div",{children:[u==="unit"&&e.jsxs(e.Fragment,{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:["Managing Units for ",a.name]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"Search by name, RUC, UIC, MCC, address or ZIP",className:"px-4 py-2 border rounded w-full",value:h,onChange:s=>g(s.target.value),onKeyDown:s=>{s.key==="Enter"&&p(h),s.key==="Escape"&&(g(""),p(""))},ref:N}),e.jsx("button",{className:"px-3 py-2 bg-blue-600 text-white rounded",onClick:()=>p(h),children:"Search"}),e.jsx("button",{className:"px-3 py-2 bg-gray-200 rounded",onClick:()=>{var s;g(""),p(""),(s=N.current)==null||s.focus()},children:"Clear"})]})})]}),e.jsx("div",{className:"border-b border-gray-200 mb-4",children:e.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[e.jsx("button",{onClick:()=>E("unit"),className:`${u==="unit"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm`,children:"Unit"}),e.jsx("button",{onClick:()=>E("structure"),className:`${u==="structure"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm`,children:"Structure"}),e.jsx("button",{onClick:()=>E("permissions"),className:`${u==="permissions"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm`,children:"Permissions"})]})}),u==="unit"&&e.jsx("div",{className:"border-b border-gray-200 mb-4",children:e.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[e.jsx("button",{onClick:()=>A("assigned"),className:`${w==="assigned"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm`,children:"Assigned Units"}),e.jsx("button",{onClick:()=>A("unassigned"),className:`${w==="unassigned"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm`,children:"Unassigned Units"})]})}),e.jsxs("div",{className:"overflow-x-auto",children:[u==="unit"&&w==="assigned"&&e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left border-b",children:[e.jsx("th",{className:"py-2 px-3",children:"Assigned"}),e.jsx("th",{className:"py-2 px-3",children:"Unit Name"}),e.jsx("th",{className:"py-2 px-3",children:"RUC"}),e.jsx("th",{className:"py-2 px-3",children:"UIC"}),e.jsx("th",{className:"py-2 px-3",children:"MCC"}),e.jsx("th",{className:"py-2 px-3",children:"Address"})]})}),e.jsxs("tbody",{children:[q.map(s=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-2 px-3",children:e.jsx("input",{type:"checkbox",checked:!0,onChange:()=>D(s.uic)})}),e.jsx("td",{className:"py-2 px-3",children:s.unitName}),e.jsx("td",{className:"py-2 px-3",children:s.ruc}),e.jsx("td",{className:"py-2 px-3",children:s.uic}),e.jsx("td",{className:"py-2 px-3",children:s.mcc}),e.jsx("td",{className:"py-2 px-3",children:`${s.streetAddress}, ${s.cityState} ${s.zip}`})]},s.uic)),q.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"py-3 px-3 text-gray-500",children:"No assigned units"})})]})]}),u==="unit"&&w==="unassigned"&&e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left border-b",children:[e.jsx("th",{className:"py-2 px-3",children:"Assign"}),e.jsx("th",{className:"py-2 px-3",children:"Unit Name"}),e.jsx("th",{className:"py-2 px-3",children:"RUC"}),e.jsx("th",{className:"py-2 px-3",children:"UIC"}),e.jsx("th",{className:"py-2 px-3",children:"MCC"}),e.jsx("th",{className:"py-2 px-3",children:"Address"})]})}),e.jsxs("tbody",{children:[Z.map(s=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-2 px-3",children:e.jsx("input",{type:"checkbox",checked:!1,onChange:()=>D(s.uic)})}),e.jsx("td",{className:"py-2 px-3",children:s.unitName}),e.jsx("td",{className:"py-2 px-3",children:s.ruc}),e.jsx("td",{className:"py-2 px-3",children:s.uic}),e.jsx("td",{className:"py-2 px-3",children:s.mcc}),e.jsx("td",{className:"py-2 px-3",children:`${s.streetAddress}, ${s.cityState} ${s.zip}`})]},s.uic)),Z.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"py-3 px-3 text-gray-500",children:"No unassigned units"})})]})]})]}),u==="unit"&&w==="assigned"&&e.jsx("div",{className:"mt-4",children:e.jsx(X,{currentPage:C,totalPages:T,totalItems:M,pageSize:S,startIndex:K,endIndex:re,onPageChange:s=>m(s),onPageSizeChange:s=>{se(s),m(1)},onNext:()=>m(Math.min(C+1,T)),onPrevious:()=>m(Math.max(C-1,1)),onFirst:()=>m(1),onLast:()=>m(T),canGoNext:C<T,canGoPrevious:C>1,pageSizeOptions:[5,10,25,50]})}),u==="unit"&&w==="unassigned"&&e.jsx("div",{className:"mt-4",children:e.jsx(X,{currentPage:v,totalPages:R,totalItems:F,pageSize:k,startIndex:J,endIndex:ie,onPageChange:s=>$(s),onPageSizeChange:s=>{ae(s),$(1)},onNext:()=>$(Math.min(v+1,R)),onPrevious:()=>$(Math.max(v-1,1)),onFirst:()=>$(1),onLast:()=>$(R),canGoNext:v<R,canGoPrevious:v>1,pageSizeOptions:[5,10,25,50]})}),u==="structure"&&e.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Installation Sections"}),e.jsx("button",{className:"text-sm px-2 py-1 bg-gray-100 rounded",onClick:()=>{a&&U({...a,sections:a.sections||[],commandSections:a.commandSections||[]}).then(({ok:s})=>{x(s?{type:"success",message:"Installation sections saved."}:{type:"error",message:"Failed to save installation sections."})})},children:"Save"})]}),e.jsx(Y,{label:"Add section (e.g., Admin, Security)",list:a.sections||[],onAdd:s=>{s.trim()&&i(n=>n&&{...n,sections:Array.from(new Set([...n.sections||[],s.trim()]))})},onRemove:s=>{i(n=>n&&{...n,sections:(n.sections||[]).filter(t=>t!==s)})}})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Installation Command Sections"}),e.jsx("button",{className:"text-sm px-2 py-1 bg-gray-100 rounded",onClick:()=>{a&&U({...a,sections:a.sections||[],commandSections:a.commandSections||[]}).then(({ok:s})=>{x(s?{type:"success",message:"Installation command sections saved."}:{type:"error",message:"Failed to save installation command sections."})})},children:"Save"})]}),e.jsx(Y,{label:"Add command section (e.g., XO, SgtMaj)",list:a.commandSections||[],onAdd:s=>{s.trim()&&i(n=>n&&{...n,commandSections:Array.from(new Set([...n.commandSections||[],s.trim()]))})},onRemove:s=>{i(n=>n&&{...n,commandSections:(n.commandSections||[]).filter(t=>t!==s)})}})]})]}),u==="permissions"&&a&&e.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2 p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Installation Commander"}),e.jsx("div",{className:"text-sm text-gray-600",children:(()=>{const s=I.find(n=>n.id===a.commanderUserId);return s?`${s.rank||""} ${s.lastName||""}, ${s.firstName||""}`.trim():"None"})()})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",placeholder:"Enter EDIPI",className:"px-2 py-1 border rounded w-48",value:a._commanderEdipi||"",onChange:s=>i(n=>n&&{...n,_commanderEdipi:s.target.value})}),e.jsx("button",{className:"px-2 py-1 bg-blue-600 text-white rounded",onClick:async()=>{const s=String(a._commanderEdipi||"").trim();if(!s)return;const{user:n}=await B(s);if(!(n!=null&&n.id)){x({type:"error",message:`No user found for EDIPI ${s}`});return}i(t=>t&&{...t,commanderUserId:n.id}),x({type:"success",message:`Set installation commander: ${n.lastName||""}, ${n.firstName||""}`})},children:"Set"}),e.jsx("button",{className:"px-2 py-1 bg-gray-200 rounded",onClick:()=>i(s=>s&&{...s,commanderUserId:void 0,_commanderEdipi:""}),children:"Clear"}),e.jsx("button",{className:"px-2 py-1 bg-gray-100 rounded",onClick:async()=>{if(!a)return;const{ok:s}=await U(a);x(s?{type:"success",message:"Installation commander saved."}:{type:"error",message:"Failed to save installation commander."})},children:"Save"})]})]}),e.jsx(H,{title:"Section Permissions",sections:a.sections||[],assignments:a.sectionAssignments||{},users:I,onAddByEdipi:async(s,n)=>{const{user:t}=await B(n);if(!(t!=null&&t.id)){x({type:"error",message:`No user found for EDIPI ${n}`});return}i(o=>{var j;return o&&{...o,sectionAssignments:{...o.sectionAssignments||{},[s]:Array.from(new Set([...((j=o.sectionAssignments)==null?void 0:j[s])||[],t.id]))}}}),x({type:"success",message:`Added ${t.lastName||""}, ${t.firstName||""} to ${s}`})},onRemove:(s,n)=>{i(t=>{var o;return t&&{...t,sectionAssignments:{...t.sectionAssignments||{},[s]:(((o=t.sectionAssignments)==null?void 0:o[s])||[]).filter(j=>j!==n)}}})},onSave:async()=>{if(!a)return;const{ok:s}=await U(a);x(s?{type:"success",message:"Section permissions saved."}:{type:"error",message:"Failed to save section permissions."})}}),e.jsx(H,{title:"Command Section Permissions",sections:a.commandSections||[],assignments:a.commandSectionAssignments||{},users:I,onAddByEdipi:async(s,n)=>{const{user:t}=await B(n);if(!(t!=null&&t.id)){x({type:"error",message:`No user found for EDIPI ${n}`});return}i(o=>{var j;return o&&{...o,commandSectionAssignments:{...o.commandSectionAssignments||{},[s]:Array.from(new Set([...((j=o.commandSectionAssignments)==null?void 0:j[s])||[],t.id]))}}}),x({type:"success",message:`Added ${t.lastName||""}, ${t.firstName||""} to ${s}`})},onRemove:(s,n)=>{i(t=>{var o;return t&&{...t,commandSectionAssignments:{...t.commandSectionAssignments||{},[s]:(((o=t.commandSectionAssignments)==null?void 0:o[s])||[]).filter(j=>j!==n)}}})},onSave:async()=>{if(!a)return;const{ok:s}=await U(a);x(s?{type:"success",message:"Command section permissions saved."}:{type:"error",message:"Failed to save command section permissions."})}})]}),e.jsx("button",{className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded disabled:opacity-50",onClick:ne,children:"Save Changes"})]})}),f&&e.jsx("div",{className:`mt-4 p-3 rounded-lg border ${f.type==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:f.message})]})}const Y=({label:c,list:r,onAdd:a,onRemove:i})=>{const[h,g]=d.useState("");return e.jsxs("div",{children:[e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("input",{type:"text",value:h,onChange:b=>g(b.target.value),placeholder:c,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{className:"px-3 py-2 bg-blue-600 text-white rounded-lg",onClick:()=>{a(h),g("")},children:"Add"})]}),e.jsxs("div",{className:"space-y-2",children:[r.map(b=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[e.jsx("span",{children:b}),e.jsx("button",{className:"text-red-600 text-sm",onClick:()=>i(b),children:"Remove"})]},b)),r.length===0&&e.jsx("p",{className:"text-sm text-gray-500",children:"No sections configured"})]})]})},H=({title:c,sections:r,assignments:a,users:i,onAddByEdipi:h,onRemove:g,onSave:b})=>{const[p,f]=d.useState({}),x=l=>`${l.rank||""} ${l.lastName||""}, ${l.firstName||""}${l.mi?" "+l.mi:""}`.trim();return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:c}),e.jsx("button",{className:"text-sm px-2 py-1 bg-gray-100 rounded",onClick:()=>b(),children:"Save"})]}),e.jsxs("div",{className:"space-y-4",children:[r.length===0&&e.jsx("p",{className:"text-sm text-gray-500",children:"No sections configured."}),r.map(l=>e.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"font-medium text-gray-900 mb-2",children:l}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("input",{type:"text",value:p[l]||"",onChange:y=>f(N=>({...N,[l]:y.target.value})),placeholder:"Enter EDIPI",className:"px-2 py-1 border rounded w-48"}),e.jsx("button",{className:"px-2 py-1 bg-blue-600 text-white rounded disabled:opacity-50",disabled:!p[l],onClick:async()=>{const y=(p[l]||"").trim();y&&(await h(l,y),f(N=>({...N,[l]:""})))},children:"Find & Add"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[(a[l]||[]).map(y=>{const N=i.find(u=>u.id===y);return e.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 text-xs bg-gray-100 rounded border",children:[e.jsx("span",{children:N?x(N):y}),e.jsx("button",{className:"text-red-600",onClick:()=>g(l,y),children:"âœ•"})]},y)}),(a[l]||[]).length===0&&e.jsx("span",{className:"text-xs text-gray-500",children:"No users assigned"})]})]},l))]})]})},Pe=Object.freeze(Object.defineProperty({__proto__:null,default:ke},Symbol.toStringTag,{value:"Module"}));export{ke as I,X as P,Pe as a};
